:host {
  display: block;
  padding: clamp(2rem, 3vw, 3.5rem) clamp(1rem, 4vw, 4rem);
}

.contact {
  display: grid;
  gap: clamp(2rem, 4vw, 4rem);
  align-items: center;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.contact__intro {
  max-width: 520px;
  color: var(--text-color);
  position: sticky;
  top: clamp(1rem, 4vw, 2.5rem);
  align-self: flex-start;

  h1 {
    font-size: clamp(2rem, 4vw, 2.8rem);
    margin-bottom: 1rem;
  }

  p {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }
}

@media (max-width: 768px) {
  .contact__intro {
    position: static;
  }
}

.contact__eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.2em;
  font-size: 0.75rem;
  color: var(--primary-color);
  margin-bottom: 0.75rem;
}

.contact__chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.contact__balloon-wrapper {
  display: flex;
  justify-content: center;
  overflow: visible;
}

.contact__form {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 760px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(1.5rem, 3vw, 2.5rem);
  overflow: visible;
}

.contact__cluster {
  width: min(720px, 100%);
  height: clamp(420px, 55vw, 520px);
  margin: 0 auto;
  position: relative;
  overflow: visible;
}

.contact__ambient {
  position: absolute;
  inset: -2% 2% -14%;
  pointer-events: none;
  z-index: 0;
}

.contact__ambient-balloon {
  position: absolute;
  pointer-events: auto;
  cursor: pointer;
  width: clamp(80px, 14vw, 140px);
  aspect-ratio: 2 / 3;
  border-radius: 50% 50% 44% 44% / 75% 75% 38% 38%;
  background: linear-gradient(135deg, #fff4d9, #f2c57c 65%, #c98631);
  box-shadow:
    inset 0 16px 26px rgba(255, 255, 255, 0.45),
    inset 0 -12px 22px rgba(109, 69, 16, 0.28),
    0 26px 46px rgba(168, 118, 40, 0.22);
  opacity: 0.65;
  filter: blur(0.2px);
  --ambient-pointer-x: 0px;
  --ambient-pointer-y: 0px;
  --ambient-pointer-tilt: 0deg;
  --ambient-pull-x: 0.2;
  --ambient-pull-y: 0.25;
  --ambient-scale: 0.85;
  --ambient-tilt: -4deg;
  --ambient-string-length: 190%;
  --ambient-string-tilt: 0deg;
  --ambient-string-shift: 0px;
  transform:
    translate3d(
      calc(var(--ambient-pointer-x) * var(--ambient-pull-x)),
      calc(var(--ambient-pointer-y) * var(--ambient-pull-y)),
      0
    )
    rotate(var(--ambient-tilt))
    rotate(var(--ambient-pointer-tilt))
    scale(var(--ambient-scale));
  transition: transform 0.45s ease, opacity 0.35s ease, filter 0.35s ease;
  z-index: 0;

  &::before {
    content: '';
    position: absolute;
    top: 92%;
    left: 50%;
    width: 2px;
    height: var(--ambient-string-length);
    transform-origin: top center;
    transform: translateX(calc(-50% + var(--ambient-string-shift))) rotate(var(--ambient-string-tilt));
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.85), rgba(243, 198, 120, 0.25));
    opacity: 0.85;
    filter: drop-shadow(0 4px 6px rgba(153, 109, 45, 0.25))
      drop-shadow(0 14px 22px rgba(143, 94, 32, 0.28));
    pointer-events: none;
  }
}

.contact__ambient-balloon:hover {
  opacity: 0.85;
  filter: brightness(1.08);
}

.contact__ambient-balloon::after {
  content: '';
  position: absolute;
  inset: 12% 18% 48% 22%;
  border-radius: 999px;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.55), transparent);
  opacity: 0.8;
}

.contact__ambient-balloon--rose {
  top: 2%;
  left: 12%;
  width: clamp(120px, 20vw, 180px);
  --ambient-pull-x: 0.32;
  --ambient-pull-y: 0.28;
  --ambient-scale: 1;
  --ambient-tilt: -2deg;
  --ambient-string-length: 210%;
  --ambient-string-tilt: -4deg;
  --ambient-string-shift: -6px;
  background: linear-gradient(135deg, #fff9ec, #f6d59c 60%, #d09034);
}

.contact__ambient-balloon--sherbet {
  top: 18%;
  right: 14%;
  width: clamp(100px, 17vw, 160px);
  --ambient-pull-x: 0.25;
  --ambient-pull-y: 0.32;
  --ambient-scale: 0.95;
  --ambient-tilt: 3deg;
  --ambient-string-length: 205%;
  --ambient-string-tilt: 6deg;
  --ambient-string-shift: 4px;
  background: linear-gradient(135deg, #fff4d4, #f1c06a 58%, #bf7c22);
}

.contact__ambient-balloon--lavender {
  bottom: 8%;
  left: 18%;
  width: clamp(90px, 15vw, 150px);
  --ambient-pull-x: 0.18;
  --ambient-pull-y: 0.22;
  --ambient-scale: 0.9;
  --ambient-tilt: -6deg;
  --ambient-string-length: 220%;
  --ambient-string-tilt: -8deg;
  --ambient-string-shift: -4px;
  background: linear-gradient(140deg, #fff8e2, #f5c97a 55%, #c88a2e);
  opacity: 0.55;
}

.contact__ambient-balloon--gold {
  bottom: -2%;
  right: 24%;
  width: clamp(80px, 13vw, 130px);
  --ambient-pull-x: 0.35;
  --ambient-pull-y: 0.3;
  --ambient-scale: 0.85;
  --ambient-tilt: 8deg;
  --ambient-string-length: 225%;
  --ambient-string-tilt: 10deg;
  --ambient-string-shift: 8px;
  background: linear-gradient(130deg, #fff1c8, #ebb04c 55%, #b06a17);
  opacity: 0.65;
}

.contact__balloon {
  position: relative;
  width: clamp(220px, 30vw, 260px);
  min-height: clamp(280px, 38vw, 340px);
  aspect-ratio: 3 / 4;
  --balloon-base-transform: translate3d(0, 0, 0);
  --balloon-float-x: 0px;
  --balloon-float-y: 0px;
  --balloon-tilt: 0deg;
  --balloon-focus-y: 0px;
  --balloon-focus-x: 0px;
  --balloon-focus-scale: 1;
  --balloon-peer-slide-x: 0px;
  --balloon-peer-bob-y: 0px;
  --balloon-peer-tilt: 0deg;
  --balloon-layer-base: 1;
  --balloon-layer-shift: 0;
  --balloon-fill: linear-gradient(135deg, #fff8e6, #f4c979 60%, #cf8d38);
  --balloon-glow: rgba(190, 142, 69, 0.38);
  --balloon-rim: rgba(255, 248, 232, 0.65);
  padding: clamp(1rem, 1.5vw, 1.25rem);
  border-radius: 54% 54% 46% 46% / 70% 70% 42% 42%;
  clip-path: path(
    'M50% 0% C 81% 0% 100% 27% 100% 58% C 100% 80% 78% 98% 66% 102% C 61% 112% 56% 130% 50% 138% C 44% 130% 39% 112% 34% 102% C 22% 98% 0% 80% 0% 58% C 0% 27% 19% 0% 50% 0%'
  );
  background:
    radial-gradient(circle at 26% 20%, rgba(255, 255, 255, 0.7), transparent 48%),
    radial-gradient(circle at 70% 42%, rgba(255, 255, 255, 0.25), transparent 60%),
    var(--balloon-fill);
  background-blend-mode: soft-light;
  box-shadow:
    inset 0 20px 38px rgba(255, 255, 255, 0.55),
    inset 0 -28px 42px rgba(97, 61, 11, 0.22),
    0 35px 70px var(--balloon-glow);
  border: 1.5px solid var(--balloon-rim);
  overflow: hidden;
  transform-origin: center top;
  transform: var(--balloon-base-transform)
    translate3d(var(--balloon-peer-slide-x), var(--balloon-peer-bob-y), 0)
    translate3d(var(--balloon-float-x), var(--balloon-float-y), 0)
    rotate(var(--balloon-tilt))
    rotate(var(--balloon-peer-tilt))
    translate3d(var(--balloon-focus-x), var(--balloon-focus-y), 0)
    scale(var(--balloon-focus-scale));
  transition:
    transform 0.45s cubic-bezier(0.22, 1, 0.36, 1),
    box-shadow 0.3s ease,
    filter 0.3s ease;
  z-index: calc(var(--balloon-layer-base) + var(--balloon-layer-shift));

  &::before {
    content: '';
    position: absolute;
    inset: 6% 10% 18% 8%;
    border-radius: 50% 50% 40% 40% / 78% 78% 38% 38%;
    background: linear-gradient(120deg, rgba(255, 255, 255, 0.55), transparent 65%);
    mix-blend-mode: screen;
    opacity: 0.85;
    pointer-events: none;
  }

  &::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 50%;
    width: 34px;
    height: 26px;
    transform: translateX(-50%);
    background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.65), rgba(0, 0, 0, 0.18));
    border-radius: 52% 52% 36% 36%;
    box-shadow:
      inset 0 -4px 8px rgba(0, 0, 0, 0.18),
      0 2px 3px rgba(255, 255, 255, 0.45);
    z-index: 1;
  }

  &.is-active {
    --balloon-layer-shift: 12;
    box-shadow:
      inset 0 24px 40px rgba(255, 255, 255, 0.65),
      inset 0 -28px 40px rgba(87, 54, 8, 0.25),
      0 45px 90px rgba(0, 0, 0, 0.3);
    filter: brightness(1.04);
  }

  &--details {
    position: absolute;
    top: 0;
    left: 6%;
    --balloon-fill: radial-gradient(circle at 25% 20%, rgba(255, 255, 255, 0.45), transparent 45%),
      linear-gradient(140deg, #fff5dc, #f3c16e 60%, #c9852d);
    --balloon-glow: rgba(196, 147, 62, 0.42);
  }

  &--event {
    position: absolute;
    top: 8%;
    right: 5%;
    --balloon-fill: radial-gradient(circle at 25% 15%, rgba(255, 255, 255, 0.45), transparent 55%),
      linear-gradient(130deg, #fff2d0, #f0bb58 58%, #be761f);
    --balloon-glow: rgba(206, 148, 62, 0.4);
    --balloon-rim: rgba(255, 247, 229, 0.75);
  }

  &--message {
    position: absolute;
    bottom: 0;
    left: 50%;
    --balloon-base-transform: translate3d(-50%, 0, 0);
    --balloon-fill: radial-gradient(circle at 28% 20%, rgba(255, 255, 255, 0.45), transparent 55%),
      linear-gradient(135deg, #fff9e6, #f5cf82 55%, #d19035);
    --balloon-glow: rgba(176, 134, 60, 0.35);
    --balloon-rim: rgba(255, 248, 232, 0.7);
  }
}

.contact__balloon-content {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(0.85rem, 2vw, 1.25rem);
  padding: 0.5rem 1rem 1.25rem;
  height: 100%;
  box-sizing: border-box;
  text-align: center;
  border-radius: 36px;
  backdrop-filter: blur(6px);
}

.contact__section-title {
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: rgba(117, 20, 57, 0.85);
  margin-bottom: 0.25rem;
  font-weight: 700;
}

.contact__fields {
  display: grid;
  gap: clamp(0.85rem, 1.8vw, 1.1rem);
  justify-items: center;
  width: 100%;

  &--two {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
}

.contact__field {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  width: 100%;
  align-items: center;

  label {
    font-weight: 600;
    font-size: 0.85rem;
    color: rgba(73, 19, 38, 0.85);
    text-align: center;
  }
}

.contact__control {
  width: 100%;
  display: block;
  margin: 0 auto;
  width: calc(100% - 2rem);
  border: 1px solid rgba(255, 255, 255, 0.85);
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.72);
  padding: 0.65rem 0.85rem;
  font-size: 0.95rem;
  box-sizing: border-box;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.8),
    0 6px 16px rgba(201, 109, 170, 0.18);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  text-align: center;

  &--textarea {
    min-height: 140px;
    resize: vertical;
    line-height: 1.5;
  }
}

.contact__calendar-button.p-button {
  width: calc(100% - 2rem);
  margin: 0 auto;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.82);
  color: rgba(73, 19, 38, 0.95);
  font-weight: 600;
  font-size: 0.95rem;
  padding: 0.85rem 1.25rem;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.8),
    0 6px 16px rgba(201, 109, 170, 0.18);
  display: flex;
  justify-content: center;
  gap: 0.65rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
}

.contact__calendar-button.p-button.is-invalid {
  border-color: rgba(236, 117, 142, 0.95);
  box-shadow:
    inset 0 0 0 1px rgba(236, 117, 142, 0.4),
    0 6px 16px rgba(201, 109, 170, 0.18);
}

.contact__calendar-button.p-button .p-button-label {
  flex: 0 1 auto;
}

.contact__actions {
  text-align: center;

  &--anchor {
    width: min(360px, 100%);
    margin-top: -0.25rem;
  }
}

.contact__shine,
.contact__texture,
.contact__gloss,
.contact__halo {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

.contact__shine {
  inset: 10% auto auto 15%;
  width: 45%;
  height: 42%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.85), transparent 65%);
  filter: blur(2px);
  mix-blend-mode: screen;
  opacity: 0.9;
}

.contact__texture {
  background-image: linear-gradient(
      115deg,
      rgba(255, 255, 255, 0.18) 0%,
      transparent 55%,
      rgba(255, 255, 255, 0.12) 100%
    ),
    radial-gradient(circle at 80% 15%, rgba(255, 255, 255, 0.12), transparent 50%);
  opacity: 0.6;
  mix-blend-mode: soft-light;
}

.contact__gloss {
  inset: 12% 18% auto auto;
  width: 18%;
  height: 65%;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.7), transparent 85%);
  opacity: 0.65;
  filter: blur(0.5px);
  mix-blend-mode: screen;
}

.contact__halo {
  inset: -6% -6% -8%;
  width: auto;
  height: auto;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.45), transparent 65%);
  filter: blur(18px);
  opacity: 0.55;
  z-index: 0;
}

.contact__tether {
  width: min(620px, 100%);
  margin: -1rem auto 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
}

.contact__strings {
  width: 100%;
  height: clamp(190px, 26vw, 250px);
  pointer-events: none;
  overflow: visible;
  transform: translateY(-0.4rem);
}

.contact__string {
  fill: none;
  stroke-width: 2.4;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
  opacity: 0.95;
  mix-blend-mode: screen;
  filter: drop-shadow(0 2px 6px rgba(176, 140, 82, 0.35))
    drop-shadow(0 10px 18px rgba(184, 132, 70, 0.25));
  transition: stroke-width 0.2s ease, opacity 0.2s ease;
}

.contact__string--details {
  stroke-width: 2.6;
}

.contact__string--event {
  stroke-width: 2.5;
}

.contact__string--message {
  stroke-width: 2.8;
}

.contact__alerts {
  margin-top: 1.5rem;
  display: grid;
  gap: 0.5rem;
}

:host ::ng-deep .contact__control.p-inputtextarea {
  padding: 0.9rem 1rem;
}

:host ::ng-deep .contact__chips .p-chip {
  background: rgba(255, 255, 255, 0.4);
  color: var(--text-color);
  border: 1px solid rgba(255, 255, 255, 0.6);
  font-weight: 600;
}

:host ::ng-deep .contact__actions .p-button {
  width: 100%;
  padding-block: 0.95rem;
  border-radius: 999px;
  font-size: 1rem;
  box-shadow:
    0 12px 25px rgba(222, 105, 172, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

:host ::ng-deep .contact__actions--anchor .p-button {
  margin-top: -0.4rem;
}

@media (max-width: 768px) {
  .contact__cluster {
    height: 760px;
  }

  .contact__balloon {
    width: min(320px, 90%);
    min-height: 300px;
  }

  .contact__balloon--details {
    top: 0;
    left: 50%;
    --balloon-base-transform: translate3d(-50%, 0, 0);
  }

  .contact__balloon--event {
    top: 32%;
    left: 50%;
    right: auto;
    --balloon-base-transform: translate3d(-50%, 0, 0);
  }

  .contact__balloon--message {
    bottom: auto;
    top: 64%;
  }

  .contact__tether {
    margin-top: 0;
  }

  .contact__strings {
    height: 220px;
  }
}
